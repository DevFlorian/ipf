
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2017-11-21
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>IPF 3.4 Migration Guide | Reflow Maven Skin</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="https://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />

		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
	</head>

	<body class="page-migration-34 project-ipf" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="./"><span class="color-highlight">IPF</span> Open eHealth Integration Platform</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a></li>
							<li ><a href="https://github.com/oehf/ipf" title="GitHub project" class="externalLink">GitHub project</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a></li>
									<li ><a href="ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a></li>
									<li ><a href="ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a></li>
									<li ><a href="ipf-modules-cda/index.html" title="CDA Support">CDA Support</a></li>
									<li ><a href="ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a></li>
									<li ><a href="ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a></li>
									<li ><a href="ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a></li>
									<li ><a href="ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a></li>
									<li ><a href="dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a></li>
									<li ><a href="ipf-tutorials/index.html" title="Tutorials">Tutorials</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="http://oehf.github.io/ipf" id="bannerLeft"><h1><br/><span class="color-highlight">IPF</span> Open eHealth Integration Platform</h1></a>
					<p class="lead">eHealth standards on steroids</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="IPF_3.4_Migration_Guide">IPF 3.4 Migration Guide</h2>
 </div> 
 <p>IPF 3.4 comes with some changes that must be considered when upgrading from IPF 3.2 or IPF 3.3 to IPF 3.4.</p> 
 <div class="section"> 
  <h3 id="FHIR-based_IHE_transaction_modules_changes">FHIR-based IHE transaction modules changes</h3> 
  <p>The module ihe-modules-fhir has been removed. There was no code, the module only contributed 3rd party dependencies.</p> 
  <p>The following classes were deprecated:</p> 
  <ul> 
   <li><tt>org.openehealth.ipf.platform.camel.ihe.fhir.translation.FhirCamelTranslators</tt> : use <tt>org.openehealth.ipf.platform.camel.ihe.fhir.core.FhirCamelTranslators</tt></li> 
   <li><tt>org.openehealth.ipf.commons.ihe.fhir.translation.TranslatorFhirToHL7v2</tt> : use <tt>org.openehealth.ipf.commons.ihe.fhir.translation.FhirTranslator&lt;Message&gt;</tt></li> 
   <li><tt>org.openehealth.ipf.commons.ihe.fhir.translation.TranslatorHL7v2ToFhir</tt> : use <tt>org.openehealth.ipf.commons.ihe.fhir.translation.ToFhirTranslator&lt;Message&gt;</tt></li> 
  </ul> 
  <p>The following deprecated classes have been removed:</p> 
  <ul> 
   <li><tt>org.openehealth.ipf.commons.ihe.fhir.CamelFhirServlet</tt></li> 
   <li><tt>org.openehealth.ipf.commons.ihe.fhir.AuditRecordTranslator</tt></li> 
   <li><tt>org.openehealth.ipf.platform.camel.ihe.fhir.iti78.Iti78Configuration</tt></li> 
   <li><tt>org.openehealth.ipf.platform.camel.ihe.fhir.iti83.Iti83Configuration</tt></li> 
  </ul> 
  <p>The following backwards-incompatible changes were done:</p> 
  <ul> 
   <li><tt>org.openehealth.ipf.commons.ihe.fhir.CamelFhirServlet</tt> now requires to be initialized with a fhirVersion parameter (â€˜DSTU2_HL7ORGâ€™ or â€˜DSTU3â€™)</li> 
   <li><tt>org.openehealth.ipf.commons.ihe.fhir.FhirSearchParameters</tt> defines a new method <tt>getIncludeSpec()</tt> in order to store <tt>_include</tt> and <tt>_revinclude</tt> response modifiers</li> 
  </ul> 
  <p>Due to adding FHIR-based IHE transactions for the STU3 version of FHIR, modules were split up into ones that are independent of a specific FHIR version and ones that depend on a specific FHIR version. Most generic functionality was already version-independent, but IHE transaction functionality obviously requires the appropriate FHIR resource classes.</p> 
  <p>Adjust your dependencies to include specifically either the <tt>-dstu2-</tt> or <tt>-stu3-</tt> modules, e.g. instead of <tt>ipf-platform-ihe-fhir-pixpdq</tt> use either <tt>ipf-platform-ihe-fhir-dstu2-pixpdq</tt> or <tt>ipf-platform-ihe-fhir-stu3-pixpdq</tt>.</p> 
  <p>Note that all DSTU2 code is effectively deprecated, i.e. no bugs or changes will be applied anymore, and related modules will be removed in one of the upcoming releases. STU3 modules are actively supported, until one day IHE moves to STU4, etc.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Boolean_conversion_for_HL7_fields_and_structures">Boolean conversion for HL7 fields and structures</h3> 
  <p>The HL7 DSL now allows to check for empty fields or structures using â€˜Groovy truthâ€™, i.e.</p> 
  <p><tt>if (!PID[3]) println('no identifiers')</tt></p> 
 </div> 
 <div class="section"> 
  <h3 id="XDS_SourcePatientInfo">XDS SourcePatientInfo</h3> 
  <p>The class <tt>org.openehealth.ipf.commons.ihe.xds.core.metadata.PatientInfo</tt> has been completely rewritten.<br />Now it supports arbitrary PID fields (including multiple repetitions) and provides the possibility to access and manipulate unparsed HL7 representations of them. In addition, selected PID fields remain accessible as XDS metadata objects. These two representations (HL7 strings and XDS metadata) are synchronized with each other.</p> 
  <p>The method <tt>getHl7FieldIterator(String fieldId)</tt> returns an iterator over unparsed repetitions of an PID field (also for non-repeatable fields). Methods <tt>getIds()</tt>, <tt>getNames()</tt>, <tt>getAddresses()</tt> return iterators over lists of XDS metadata objects <tt>Identifiable</tt> (for PID-3), <tt>Name</tt> (for PID-5), <tt>Address</tt> (for PID-11), respectively. Whenever corresponding objects are inserted to or deleted from these lists, the corresponding items in the HL7 string collections are automatically updated. Whenever an object is modified in-place, it must be â€œcommittedâ€? using of a call to <tt>set()</tt>, e.g:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>ListIterator&lt;Name&gt; iter = patientInfo.getNames();
Name name = iter.next();
name.setFamilyName(&quot;Krusenstern&quot;);
iter.set(name);   // this statement is absolutely essential!

</pre> 
   </div> 
  </div> 
  <p>Methods <tt>getDateOfBirth()/setDateOfBirth()</tt> and <tt>getGender()/setGender()</tt> provide access to XDS metadata elements for HL7 fields PID-7 and PID-8. These methods touch only first elements in the corresponding HL7 string collections, because PID-7 and PID-8 are not repeatable. </p> 
  <p>For further information and code samples, please take a look at the classes <tt>org.openehealth.ipf.commons.ihe.xds.core.metadata.PatientInfo</tt> and <tt>org.openehealth.ipf.commons.ihe.xds.core.transform.hl7.pid.PatientInfoTest</tt>.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Simplified_creation_of_ITI-43ITI-86_requests_from_existing_DocumentEntries">Simplified creation of ITI-43/ITI-86 requests from existing DocumentEntries</h3> 
  <p>In the simplified XDS data model, the new method <tt>addReferenceTo(DocumentEntry entry)</tt> in the classes <tt>org.openehealth.ipf.commons.ihe.xds.core.requests.RetrieveDocumentSet</tt> and <tt>org.openehealth.ipf.commons.ihe.xds.core.requests.RemoveDocuments</tt> provides a convenient way to add a reference to the document, represented by the given document entry, to an ITI-43 or an ITI-86 request.</p> 
 </div> 
 <div class="section"> 
  <h3 id="IHE_Profile_Updates">IHE Profile Updates</h3> 
  <p>IPF 3.4 is compatible with IHE ITI Revision 14 (published on July 21, 2017), including changes from the following Change Proposals:</p> 
 </div> 
 <div class="section"> 
  <h3 id="Camel_DSL_HL7_extensions_deprecated">Camel DSL HL7 extensions deprecated</h3> 
  <p>Due to the removal of <tt>ipf-modules-hl7-dsl</tt>, the deprecated <tt>ghl7()</tt> Camel DSL extensions now operate on plain HAPI HL7 Message objects rather than the removed <tt>MessageAdapter</tt>. All HL7- related Camel DSL extensions are now deprecated and will be removed in a subsequent IPF version.</p> 
 </div> 
 <div class="section"> 
  <h3 id="OSGi_support">OSGi support</h3> 
  <p>OSGi support has been abandoned</p> 
 </div> 
 <div class="section"> 
  <h3 id="Notice:_Removal_of_deprecated_functionality_in_IPF_3.5">Notice: Removal of deprecated functionality in IPF 3.5</h3> 
  <p>The following deprecated classes will be eventually removed in IPF 3.5</p> 
  <ul> 
   <li>all deprecated classes in <tt>ipf-modules-hl7</tt>, particularly the old validation rule builders</li> 
  </ul> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="./" title="Home">Home</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="GitHub project" class="externalLink">GitHub project</a>
						</li>
						<li >
							<a href="changes-report.html" title="Release notes">Release notes</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Download</li>
						<li >
							<a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a>
						</li>
						<li >
							<a href="license.html" title="License">License</a>
						</li>
						<li class="nav-header">Development</li>
						<li >
							<a href="development.html" title="Development">Development</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/issues/" title="Issues" class="externalLink">Issues</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
						<li class="nav-header">Submodules</li>
						<li >
							<a href="../../../../../../scm:git:git@github.com:oehf/ipf.git/index.html" title="ipf-dependencies">ipf-dependencies</a>
						</li>
						<li >
							<a href="ipf-commons/index.html" title="ipf-commons">ipf-commons</a>
						</li>
						<li >
							<a href="ipf-modules/index.html" title="ipf-modules">ipf-modules</a>
						</li>
						<li >
							<a href="ipf-spring-boot/index.html" title="ipf-spring-boot">ipf-spring-boot</a>
						</li>
						<li >
							<a href="ipf-platform-camel/index.html" title="ipf-platform-camel">ipf-platform-camel</a>
						</li>
						<li >
							<a href="ipf-tutorials/index.html" title="ipf-tutorials">ipf-tutorials</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li >
							<a href="ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a>
						</li>
						<li >
							<a href="ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a>
						</li>
						<li >
							<a href="ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a>
						</li>
						<li >
							<a href="ipf-modules-cda/index.html" title="CDA Support">CDA Support</a>
						</li>
						<li >
							<a href="ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a>
						</li>
						<li >
							<a href="ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a>
						</li>
						<li >
							<a href="ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a>
						</li>
						<li >
							<a href="ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a>
						</li>
						<li >
							<a href="dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a>
						</li>
						<li >
							<a href="ipf-tutorials/index.html" title="Tutorials">Tutorials</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Maven Reports</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
						<li >
							<a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2017 <a href="http://www.openehealth.org/">Open eHealth Foundation</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 3.4.0. </span><span class="publishDate">Last Published: 2017-11-21. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>
	<script src="https://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
